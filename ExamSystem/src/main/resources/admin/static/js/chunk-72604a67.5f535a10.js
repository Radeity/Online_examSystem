(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72604a67"],{"1e85":function(e,a,t){},"49e5":function(e,a,t){"use strict";t.d(a,"a",(function(){return o})),t.d(a,"d",(function(){return l})),t.d(a,"e",(function(){return r})),t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return c}));var n=t("b775");function o(){var e="STU";return Object(n["a"])({url:"/auth/userbyrole",method:"get",params:{role:e}})}function l(e){return Object(n["a"])({url:"/auth/saveorupdateuser",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/auth/deleteuser",method:"delete",params:e})}function i(e){return Object(n["a"])({url:"/auth/stateforbid",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/auth/statepermit",method:"post",data:e})}},"4afb":function(e,a,t){"use strict";var n=t("1e85"),o=t.n(n);o.a},c47d:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("div",[t("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入姓名查询"},model:{value:e.pagination.listQuery.teacherName,callback:function(a){e.$set(e.pagination.listQuery,"teacherName",a)},expression:"pagination.listQuery.teacherName"}}),e._v(" "),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-check",type:"primary"},nativeOn:{click:function(a){return e.handleCreate(a)}}},[e._v("增加")]),e._v(" "),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-delete",type:"danger"},nativeOn:{click:function(a){return e.handleDeletes(a)}}},[e._v("删除")])],1),e._v(" "),t("teacher-table",{attrs:{data:e._f("teacherNameFilter")(e.myTableData,e.pagination)}}),e._v(" "),t("div",[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pagination.total>0,expression:"pagination.total>0"}],attrs:{"current-page":e.pagination.listQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":e.pagination.listQuery.pageSize,total:e.pagination.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),t("teacher-dialog",{attrs:{"dialog-data":e.teacherDialogData}}),e._v(" "),t("change-password-dialog",{attrs:{"dialog-data":e.pwdDialogData}})],1)},o=[],l=(t("b071"),t("0812"),t("9d95"),t("b10f"),t("b2f4"),t("9a55"),t("0c04"),t("5fa3"),t("b3f3"),t("a084"),t("c5fb"),t("38e5")),r=t("b775");function i(){var e="TEA";return Object(r["a"])({url:"/auth/userbyrole",method:"get",params:{role:e}})}function c(e){return Object(r["a"])({url:"/auth/saveorupdateuser",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/auth/deleteuser",method:"delete",params:e})}var d=t("49e5"),u=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.data.loading,expression:"data.loading"}],attrs:{data:e.data.tableData},on:{"selection-change":e.data.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection"}}),e._v(" "),e._l(e.columnList,(function(e,a){return t("el-table-column",{key:a,attrs:{prop:e.prop,label:e.label,sortable:""}})})),e._v(" "),t("el-table-column",{attrs:{label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"启用","inactive-value":"禁用","active-text":"启用","inactive-text":"禁用"},on:{change:function(t){return e.handleChange(a.row)}},model:{value:a.row.state,callback:function(t){e.$set(a.row,"state",t)},expression:"scope.row.state"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-dropdown",{on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[e._v("\n            下拉菜单\n            "),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.data.menuList,(function(n,o){return t("el-dropdown-item",{key:o,attrs:{icon:n.icon,command:{command:n.command,row:a.row}}},[e._v(e._s(n.word))])})),1)],1)]}}])})],2)],1)},m=[],h={props:{data:{type:Object,required:!0}},data:function(){return{columnList:[{prop:"id",label:"Id"},{prop:"teacherName",label:"教师姓名"},{prop:"teacherNumber",label:"工号"},{prop:"college",label:"学院"},{prop:"gender",label:"性别"}]}},methods:{handleCommand:function(e){e.command(e.row)},handleChange:function(e){console.log(e);var a=e.state,t=e.id;"启用"===a?(console.log("qoyong"),Object(d["c"])({id:t}).then((function(e){console.log(t)}))):"禁用"===a&&Object(d["b"])({id:t}).then((function(e){console.log(t)}))}}},f=h,p=(t("4afb"),t("4023")),g=Object(p["a"])(f,u,m,!1,null,null,null),b=g.exports,D=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{attrs:{visible:e.dialogData.dialogVisible,width:"60%",top:"10vh"},on:{"update:visible":function(a){return e.$set(e.dialogData,"dialogVisible",a)}}},[t("el-form",{ref:"dataForm",staticStyle:{width:"90%"},attrs:{model:e.dialogData,"label-position":"right","label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"教师姓名",prop:"teacherName"}},[t("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:e.dialogData.formData.teacherName,callback:function(a){e.$set(e.dialogData.formData,"teacherName",a)},expression:"dialogData.formData.teacherName"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"工号",prop:"teacherNumber"}},[t("el-input",{attrs:{placeholder:"工号",clearable:""},model:{value:e.dialogData.formData.teacherNumber,callback:function(a){e.$set(e.dialogData.formData,"teacherNumber",a)},expression:"dialogData.formData.teacherNumber"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"学院",prop:"college"}},[t("el-input",{attrs:{placeholder:"学院",clearable:""},model:{value:e.dialogData.formData.college,callback:function(a){e.$set(e.dialogData.formData,"college",a)},expression:"dialogData.formData.college"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"密码","show-password":"",clearable:""},model:{value:e.dialogData.formData.password,callback:function(a){e.$set(e.dialogData.formData,"password",a)},expression:"dialogData.formData.password"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态"}},[t("el-radio-group",{model:{value:e.dialogData.formData.state,callback:function(a){e.$set(e.dialogData.formData,"state",a)},expression:"dialogData.formData.state"}},[t("el-radio",{attrs:{label:"启用"}},[e._v("启用")]),e._v(" "),t("el-radio",{attrs:{label:"禁用"}},[e._v("禁用")])],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.dialogData.formData.gender,callback:function(a){e.$set(e.dialogData.formData,"gender",a)},expression:"dialogData.formData.gender"}},[t("el-radio",{attrs:{label:"女"}},[e._v("女")]),e._v(" "),t("el-radio",{attrs:{label:"男"}},[e._v("男")])],1)],1)],1)],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(a){e.dialogData.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.dialogData.handleConfirm(a)}}},[e._v("确定")])],1)],1)},v=[],w={filters:{},props:{dialogData:{type:Object,required:!0}},data:function(){return{}},methods:{}},y=w,_=Object(p["a"])(y,D,v,!1,null,null,null),O=_.exports,C=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{attrs:{visible:e.dialogData.dialogVisible,width:"60%",top:"10vh"},on:{"update:visible":function(a){return e.$set(e.dialogData,"dialogVisible",a)}}},[t("el-form",{ref:"dataForm",staticStyle:{width:"90%"},attrs:{model:e.dialogData,"label-position":"right","label-width":"100px"}},[t("el-row",[t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{"show-password":"",placeholder:"请输入新密码"},model:{value:e.dialogData.formData.password,callback:function(a){e.$set(e.dialogData.formData,"password",a)},expression:"dialogData.formData.password"}})],1)],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(a){e.dialogData.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.dialogData.handleConfirm(a)}}},[e._v("确定")])],1)],1)},N=[],j={props:{dialogData:{type:Object,required:!0}}},S=j,T=Object(p["a"])(S,C,N,!1,null,null,null),k=T.exports;function x(e,a){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=$(e))||a&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return r=e.done,e},e:function(e){i=!0,l=e},f:function(){try{r||null==t.return||t.return()}finally{if(i)throw l}}}}function $(e,a){if(e){if("string"===typeof e)return L(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?L(e,a):void 0}}function L(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function P(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function V(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?P(Object(t),!0).forEach((function(a){Object(l["a"])(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var E={name:"User",components:{TeacherTable:b,TeacherDialog:O,ChangePasswordDialog:k},filters:{teacherNameFilter:function(e,a){var t=a.listQuery,n=V({},e),o=t.pageNum,l=t.pageSize,r=t.teacherName;return n.tableData=n.tableData.filter((function(e){return!r||e.teacherName.toLowerCase().includes(r.toLowerCase())})),a.total=n.tableData.length,n.tableData=n.tableData.filter((function(e,a){return a<l*o&&a>=l*(o-1)})),n}},data:function(){return{pagination:{listQuery:{pageNum:1,pageSize:10,teacherName:""},total:0},myTableData:{tableData:[{id:null,teacherName:"",teacherNumber:null,college:"",gender:"",state:""}],menuList:[{icon:"el-icon-edit",word:"编辑",command:this.handleEdit},{icon:"el-icon-delete",word:"删除",command:this.handleDelete},{icon:"el-icon-switch-button",word:"启用/禁用",command:this.handleChangeStatus},{icon:"el-icon-key",word:"修改密码",command:this.handleChangePassword}],loading:!1,handleSelectionChange:this.handleSelectionChange},teacherDialogData:{dialogVisible:!1,formData:{id:null,teacherName:"",teacherNumber:null,college:"",state:"",gender:""},handleConfirm:this.handleTeacherConfirm},pwdDialogData:{dialogVisible:!1,formData:{id:"",teacherName:"",teacherNumber:null,college:"",state:"",gender:""},handleConfirm:this.handlePasswdConfirm},multipleSelection:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;i().then((function(a){e.myTableData.loading=!0,e.myTableData.tableData=a.data.map((function(e){var a=["禁用","启用"],t={id:e.id,teacherNumber:e.username,teacherName:e.name,gender:e.gender,state:a[e.state],college:e.department,password:e.password};return t})),setTimeout((function(){e.myTableData.loading=!1}),500)})).catch((function(){e.myTableData.Loading=!1}))},handleSizeChange:function(e){this.pagination.listQuery.pageSize=e},handleCurrentChange:function(e){this.pagination.listQuery.pageNum=e},handleEdit:function(e){this.teacherDialogData.formData=e,this.teacherDialogData.dialogVisible=!0},handleCreate:function(){this.handleClean(),this.teacherDialogData.dialogVisible=!0},handleTeacherConfirm:function(){var e=this;this.teacherDialogData.dialogVisible=!1;var a=this.teacherDialogData.formData,t={"禁用":0,"启用":1},n={id:a.id,username:a.teacherNumber,name:a.teacherName,gender:a.gender,state:t[a.state],department:a.college,password:a.password,role:"TEA"};c(n).then((function(a){e.myTableData.loading=!0,e.getList(),setTimeout((function(){e.myTableData.loading=!1}),500)})).catch((function(){e.myTableData.Loading=!1,alert("请求失败")}))},handleClean:function(){this.teacherDialogData.formData={identification:null,teacherName:"",college:"",password:"",state:null,sex:null}},handleDelete:function(e){var a=this,t={username:e.teacherName};s(t).then((function(e){a.myTableData.loading=!0,a.getList(),setTimeout((function(){a.myTableData.loading=!1}),500)})).catch((function(){a.myTableData.Loading=!1,alert("删除教师失败")}))},handleSelectionChange:function(e){this.multipleSelection=e},handleDeletes:function(){var e,a=x(this.multipleSelection);try{for(a.s();!(e=a.n()).done;){var t=e.value;this.handleDelete(t)}}catch(n){a.e(n)}finally{a.f()}},handleChangePassword:function(e){this.pwdDialogData.formData=e,this.pwdDialogData.dialogVisible=!0},handlePasswdConfirm:function(){var e=this;this.pwdDialogData.dialogVisible=!1;var a=this.pwdDialogData.formData,t={"禁用":0,"启用":1},n={id:a.id,username:a.teacherNumber,name:a.teacherName,gender:a.gender,state:t[a.state],department:a.college,password:a.password,role:"TEA"};c(n).then((function(a){e.myTableData.loading=!0,e.getList(),setTimeout((function(){e.myTableData.loading=!1}),500)})).catch((function(){e.myTableData.Loading=!1,alert("请求失败")}))},handleChangeStatus:function(e){console.log(e);var a=e.state,t=e.id;"启用"===a?Object(d["c"])({id:t}).then((function(a){console.log(t),e.state="禁用"})):"禁用"===a&&Object(d["b"])({id:t}).then((function(a){console.log(t),e.state="启用"}))}}},z=E,A=Object(p["a"])(z,n,o,!1,null,null,null);a["default"]=A.exports}}]);