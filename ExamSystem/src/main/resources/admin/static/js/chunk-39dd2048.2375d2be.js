(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39dd2048"],{"49e5":function(a,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"d",(function(){return n})),t.d(e,"e",(function(){return i})),t.d(e,"b",(function(){return r})),t.d(e,"c",(function(){return s}));var l=t("b775");function o(){var a="STU";return Object(l["a"])({url:"/auth/userbyrole",method:"get",params:{role:a}})}function n(a){return Object(l["a"])({url:"/auth/saveorupdateuser",method:"post",data:a})}function i(a){return Object(l["a"])({url:"/auth/deleteuser",method:"delete",params:a})}function r(a){return Object(l["a"])({url:"/auth/stateforbid",method:"post",data:a})}function s(a){return Object(l["a"])({url:"/auth/statepermit",method:"post",data:a})}},"4afb":function(a,e,t){"use strict";var l=t("9cfb"),o=t.n(l);o.a},"9cfb":function(a,e,t){},c47d:function(a,e,t){"use strict";t.r(e);var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"app-container"},[t("div",[t("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入姓名查询"},model:{value:a.pagination.listQuery.teacherName,callback:function(e){a.$set(a.pagination.listQuery,"teacherName",e)},expression:"pagination.listQuery.teacherName"}}),a._v(" "),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-check",type:"primary"},nativeOn:{click:function(e){return a.handleCreate(e)}}},[a._v("增加")]),a._v(" "),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-delete",type:"danger"},nativeOn:{click:function(e){return a.handleDeletes(e)}}},[a._v("删除")])],1),a._v(" "),t("teacher-table",{attrs:{data:a._f("teacherNameFilter")(a.myTableData,a.pagination)}}),a._v(" "),t("div",[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:a.pagination.total>0,expression:"pagination.total>0"}],attrs:{"current-page":a.pagination.listQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":a.pagination.listQuery.pageSize,total:a.pagination.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),t("teacher-dialog",{attrs:{"dialog-data":a.teacherDialogData}}),a._v(" "),t("change-password-dialog",{attrs:{"dialog-data":a.pwdDialogData}})],1)},o=[],n=t("2d63"),i=(t("7f7f"),t("6762"),t("2fdb"),t("db72")),r=t("b775");function s(){var a="TEA";return Object(r["a"])({url:"/auth/userbyrole",method:"get",params:{role:a}})}function c(a){return Object(r["a"])({url:"/auth/saveorupdateuser",method:"post",data:a})}function d(a){return Object(r["a"])({url:"/auth/deleteuser",method:"delete",params:a})}var u=t("49e5"),m=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.data.loading,expression:"data.loading"}],attrs:{data:a.data.tableData},on:{"selection-change":a.data.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection"}}),a._v(" "),a._l(a.columnList,(function(a,e){return t("el-table-column",{key:e,attrs:{prop:a.prop,label:a.label,sortable:""}})})),a._v(" "),t("el-table-column",{attrs:{label:"状态",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"启用","inactive-value":"禁用","active-text":"启用","inactive-text":"禁用"},on:{change:function(t){return a.handleChange(e.row)}},model:{value:e.row.state,callback:function(t){a.$set(e.row,"state",t)},expression:"scope.row.state"}})]}}])}),a._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-dropdown",{on:{command:a.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[a._v("\n            下拉菜单\n            "),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},a._l(a.data.menuList,(function(l,o){return t("el-dropdown-item",{key:o,attrs:{icon:l.icon,command:{command:l.command,row:e.row}}},[a._v(a._s(l.word))])})),1)],1)]}}])})],2)],1)},h=[],g={props:{data:{type:Object,required:!0}},data:function(){return{columnList:[{prop:"id",label:"Id"},{prop:"teacherName",label:"教师姓名"},{prop:"teacherNumber",label:"工号"},{prop:"college",label:"学院"},{prop:"gender",label:"性别"}]}},methods:{handleCommand:function(a){a.command(a.row)},handleChange:function(a){console.log(a);var e=a.state,t=a.id;"启用"===e?(console.log("qoyong"),Object(u["c"])({id:t}).then((function(a){console.log(t)}))):"禁用"===e&&Object(u["b"])({id:t}).then((function(a){console.log(t)}))}}},p=g,f=(t("4afb"),t("2877")),b=Object(f["a"])(p,m,h,!1,null,null,null),D=b.exports,v=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("el-dialog",{attrs:{visible:a.dialogData.dialogVisible,width:"60%",top:"10vh"},on:{"update:visible":function(e){return a.$set(a.dialogData,"dialogVisible",e)}}},[t("el-form",{ref:"dataForm",staticStyle:{width:"90%"},attrs:{model:a.dialogData,"label-position":"right","label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"教师姓名",prop:"teacherName"}},[t("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:a.dialogData.formData.teacherName,callback:function(e){a.$set(a.dialogData.formData,"teacherName",e)},expression:"dialogData.formData.teacherName"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"工号",prop:"teacherNumber"}},[t("el-input",{attrs:{placeholder:"工号",clearable:""},model:{value:a.dialogData.formData.teacherNumber,callback:function(e){a.$set(a.dialogData.formData,"teacherNumber",e)},expression:"dialogData.formData.teacherNumber"}})],1)],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"学院",prop:"college"}},[t("el-input",{attrs:{placeholder:"学院",clearable:""},model:{value:a.dialogData.formData.college,callback:function(e){a.$set(a.dialogData.formData,"college",e)},expression:"dialogData.formData.college"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"密码","show-password":"",clearable:""},model:{value:a.dialogData.formData.password,callback:function(e){a.$set(a.dialogData.formData,"password",e)},expression:"dialogData.formData.password"}})],1)],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态"}},[t("el-radio-group",{model:{value:a.dialogData.formData.state,callback:function(e){a.$set(a.dialogData.formData,"state",e)},expression:"dialogData.formData.state"}},[t("el-radio",{attrs:{label:"启用"}},[a._v("启用")]),a._v(" "),t("el-radio",{attrs:{label:"禁用"}},[a._v("禁用")])],1)],1)],1),a._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:a.dialogData.formData.gender,callback:function(e){a.$set(a.dialogData.formData,"gender",e)},expression:"dialogData.formData.gender"}},[t("el-radio",{attrs:{label:"女"}},[a._v("女")]),a._v(" "),t("el-radio",{attrs:{label:"男"}},[a._v("男")])],1)],1)],1)],1)],1),a._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(e){a.dialogData.dialogVisible=!1}}},[a._v("取消")]),a._v(" "),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return a.dialogData.handleConfirm(e)}}},[a._v("确定")])],1)],1)},w=[],y={filters:{},props:{dialogData:{type:Object,required:!0}},data:function(){return{}},methods:{}},_=y,C=Object(f["a"])(_,v,w,!1,null,null,null),N=C.exports,T=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("el-dialog",{attrs:{visible:a.dialogData.dialogVisible,width:"60%",top:"10vh"},on:{"update:visible":function(e){return a.$set(a.dialogData,"dialogVisible",e)}}},[t("el-form",{ref:"dataForm",staticStyle:{width:"90%"},attrs:{model:a.dialogData,"label-position":"right","label-width":"100px"}},[t("el-row",[t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{"show-password":"",placeholder:"请输入新密码"},model:{value:a.dialogData.formData.password,callback:function(e){a.$set(a.dialogData.formData,"password",e)},expression:"dialogData.formData.password"}})],1)],1)],1),a._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(e){a.dialogData.dialogVisible=!1}}},[a._v("取消")]),a._v(" "),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return a.dialogData.handleConfirm(e)}}},[a._v("确定")])],1)],1)},O=[],k={props:{dialogData:{type:Object,required:!0}}},x=k,j=Object(f["a"])(x,T,O,!1,null,null,null),S=j.exports,L={name:"User",components:{TeacherTable:D,TeacherDialog:N,ChangePasswordDialog:S},filters:{teacherNameFilter:function(a,e){var t=e.listQuery,l=Object(i["a"])({},a),o=t.pageNum,n=t.pageSize,r=t.teacherName;return l.tableData=l.tableData.filter((function(a){return!r||a.teacherName.toLowerCase().includes(r.toLowerCase())})),e.total=l.tableData.length,l.tableData=l.tableData.filter((function(a,e){return e<n*o&&e>=n*(o-1)})),l}},data:function(){return{pagination:{listQuery:{pageNum:1,pageSize:10,teacherName:""},total:0},myTableData:{tableData:[{id:null,teacherName:"",teacherNumber:null,college:"",gender:"",state:""}],menuList:[{icon:"el-icon-edit",word:"编辑",command:this.handleEdit},{icon:"el-icon-delete",word:"删除",command:this.handleDelete},{icon:"el-icon-switch-button",word:"启用/禁用",command:this.handleChangeStatus},{icon:"el-icon-key",word:"修改密码",command:this.handleChangePassword}],loading:!1,handleSelectionChange:this.handleSelectionChange},teacherDialogData:{dialogVisible:!1,formData:{id:null,teacherName:"",teacherNumber:null,college:"",state:"",gender:""},handleConfirm:this.handleTeacherConfirm},pwdDialogData:{dialogVisible:!1,formData:{id:"",teacherName:"",teacherNumber:null,college:"",state:"",gender:""},handleConfirm:this.handlePasswdConfirm},multipleSelection:[]}},created:function(){this.getList()},methods:{getList:function(){var a=this;s().then((function(e){a.myTableData.loading=!0,a.myTableData.tableData=e.data.map((function(a){var e=["禁用","启用"],t={id:a.id,teacherNumber:a.username,teacherName:a.name,gender:a.gender,state:e[a.state],college:a.department,password:a.password};return t})),setTimeout((function(){a.myTableData.loading=!1}),500)})).catch((function(){a.myTableData.Loading=!1}))},handleSizeChange:function(a){this.pagination.listQuery.pageSize=a},handleCurrentChange:function(a){this.pagination.listQuery.pageNum=a},handleEdit:function(a){this.teacherDialogData.formData=a,this.teacherDialogData.dialogVisible=!0},handleCreate:function(){this.handleClean(),this.teacherDialogData.dialogVisible=!0},handleTeacherConfirm:function(){var a=this;this.teacherDialogData.dialogVisible=!1;var e=this.teacherDialogData.formData,t={"禁用":0,"启用":1},l={id:e.id,username:e.teacherNumber,name:e.teacherName,gender:e.gender,state:t[e.state],department:e.college,password:e.password,role:"TEA"};c(l).then((function(e){a.myTableData.loading=!0,a.getList(),setTimeout((function(){a.myTableData.loading=!1}),500)})).catch((function(){a.myTableData.Loading=!1,alert("请求失败")}))},handleClean:function(){this.teacherDialogData.formData={identification:null,teacherName:"",college:"",password:"",state:null,sex:null}},handleDelete:function(a){var e=this,t={username:a.teacherName};d(t).then((function(a){e.myTableData.loading=!0,e.getList(),setTimeout((function(){e.myTableData.loading=!1}),500)})).catch((function(){e.myTableData.Loading=!1,alert("删除教师失败")}))},handleSelectionChange:function(a){this.multipleSelection=a},handleDeletes:function(){var a,e=Object(n["a"])(this.multipleSelection);try{for(e.s();!(a=e.n()).done;){var t=a.value;this.handleDelete(t)}}catch(l){e.e(l)}finally{e.f()}},handleChangePassword:function(a){this.pwdDialogData.formData=a,this.pwdDialogData.dialogVisible=!0},handlePasswdConfirm:function(){var a=this;this.pwdDialogData.dialogVisible=!1;var e=this.pwdDialogData.formData,t={"禁用":0,"启用":1},l={id:e.id,username:e.teacherNumber,name:e.teacherName,gender:e.gender,state:t[e.state],department:e.college,password:e.password,role:"TEA"};c(l).then((function(e){a.myTableData.loading=!0,a.getList(),setTimeout((function(){a.myTableData.loading=!1}),500)})).catch((function(){a.myTableData.Loading=!1,alert("请求失败")}))},handleChangeStatus:function(a){console.log(a);var e=a.state,t=a.id;"启用"===e?Object(u["c"])({id:t}).then((function(e){console.log(t),a.state="禁用"})):"禁用"===e&&Object(u["b"])({id:t}).then((function(e){console.log(t),a.state="启用"}))}}},$=L,V=Object(f["a"])($,l,o,!1,null,null,null);e["default"]=V.exports}}]);