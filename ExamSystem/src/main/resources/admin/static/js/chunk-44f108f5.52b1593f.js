(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44f108f5"],{2992:function(a,t,e){},"5b8e":function(a,t,e){"use strict";var n=e("7054"),i=e.n(n);i.a},"6c49":function(a,t,e){"use strict";e.d(t,"c",(function(){return i})),e.d(t,"d",(function(){return l})),e.d(t,"f",(function(){return o})),e.d(t,"g",(function(){return r})),e.d(t,"e",(function(){return s})),e.d(t,"a",(function(){return c})),e.d(t,"b",(function(){return u}));var n=e("b775");function i(){return Object(n["a"])({url:"/tea/getsubject",method:"get"})}function l(a){return Object(n["a"])({url:"/tea/getpaper",method:"get",params:a})}function o(a){return Object(n["a"])({url:"/tea/saveorupdatepaper",method:"post",data:a})}function r(a){return Object(n["a"])({url:"/tea/delpaper",method:"DELETE",params:a})}function s(a){return Object(n["a"])({url:"/tea/paperdetailfortea",method:"get",params:a})}function c(a){return Object(n["a"])({url:"/tea/addquetopaper",method:"post",params:a})}function u(a){return Object(n["a"])({url:"/tea/delequefrompaper",method:"delete",params:a})}},7054:function(a,t,e){},7514:function(a,t,e){"use strict";var n=e("5ca1"),i=e("0a49")(5),l="find",o=!0;l in[]&&Array(1)[l]((function(){o=!1})),n(n.P+n.F*o,"Array",{find:function(a){return i(this,a,arguments.length>1?arguments[1]:void 0)}}),e("9c6c")(l)},b5b3:function(a,t,e){"use strict";var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.data.loading,expression:"data.loading"}],attrs:{data:a.data.tableData},on:{"selection-change":a.data.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection"}}),a._v(" "),a._l(a.data.columnList,(function(a,t){return e("el-table-column",{key:t,attrs:{prop:a.prop,label:a.label,"show-overflow-tooltip":"",sortable:""}})})),a._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-dropdown",{on:{command:a.handleCommand}},[e("span",{staticClass:"el-dropdown-link"},[a._v("\n            下拉菜单\n            "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},a._l(a.data.menuList,(function(n,i){return e("el-dropdown-item",{key:i,attrs:{icon:n.icon,command:{command:n.command,row:t.row}}},[a._v(a._s(n.word))])})),1)],1)]}}])})],2)],1)},i=[],l={props:{data:{type:Object,required:!0}},data:function(){return{}},methods:{handleCommand:function(a){a.command(a.row)}}},o=l,r=(e("5b8e"),e("2877")),s=Object(r["a"])(o,n,i,!1,null,null,null);t["a"]=s.exports},b621:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"app-container"},[e("div",[e("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入考试名称查询"},model:{value:a.pagination.listQuery.name,callback:function(t){a.$set(a.pagination.listQuery,"name",t)},expression:"pagination.listQuery.name"}}),a._v(" "),e("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-check",type:"primary"},nativeOn:{click:function(t){return a.handleCreate(t)}}},[a._v("增加")]),a._v(" "),e("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-delete",type:"danger"},nativeOn:{click:function(t){return a.handleDeletes(t)}}},[a._v("删除")])],1),a._v(" "),e("my-table",{attrs:{data:a._f("examinationFilter")(a.myTableData,a.pagination)}}),a._v(" "),e("div",[e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:a.pagination.total>0,expression:"pagination.total>0"}],attrs:{"current-page":a.pagination.listQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":a.pagination.listQuery.pageSize,total:a.pagination.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),e("examination-dialog",{attrs:{"dialog-data":a.examinationDialogData}})],1)},i=[],l=e("2d63"),o=(e("6762"),e("2fdb"),e("7f7f"),e("db72")),r=e("b775");function s(a){return console.log("params",a),Object(r["a"])({url:"/tea/getexamlist",method:"get",params:a})}function c(a){return Object(r["a"])({url:"/tea/saveorupdateExam",method:"post",data:a})}function u(a){return Object(r["a"])({url:"/tea/delExam",method:"delete",params:a})}function d(a){return Object(r["a"])({url:"/tea/publishexam",method:"post",params:a})}function m(a){return Object(r["a"])({url:"/tea/unpublishexam",method:"post",params:a})}var p=e("6c49"),f=e("b5b3"),h=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("el-dialog",{attrs:{visible:a.dialogData.dialogVisible,width:"60%",top:"10vh"},on:{"update:visible":function(t){return a.$set(a.dialogData,"dialogVisible",t)}}},[e("el-form",{ref:"dataForm",attrs:{model:a.dialogData,"label-position":"right","label-width":"100px"}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"考试名称",prop:"examName"}},[e("el-input",{attrs:{clearable:"",placeholder:"考试名称"},model:{value:a.dialogData.formData.examName,callback:function(t){a.$set(a.dialogData.formData,"examName",t)},expression:"dialogData.formData.examName"}})],1)],1),a._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"考试时间",prop:"lastTime"}},[e("el-input",{attrs:{clearable:"",placeholder:"考试时间"},model:{value:a.dialogData.formData.lastTime,callback:function(t){a.$set(a.dialogData.formData,"lastTime",t)},expression:"dialogData.formData.lastTime"}},[e("span",{attrs:{slot:"suffix"},slot:"suffix"},[a._v("分钟")])])],1)],1)],1),a._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"所属课程",prop:"subjectName"}},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择课程"},on:{change:a.handleCourseChange},model:{value:a.dialogData.formData.subjectName,callback:function(t){a.$set(a.dialogData.formData,"subjectName",t)},expression:"dialogData.formData.subjectName"}},a._l(a.dialogData.courseList,(function(a){return e("el-option",{key:a.subjectId,attrs:{label:a.subjectName,value:a.subjectName}})})),1)],1)],1),a._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"试卷",prop:"paperName"}},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择试卷前先选择课程"},on:{change:a.handlePaperChange},model:{value:a.dialogData.formData.paperName,callback:function(t){a.$set(a.dialogData.formData,"paperName",t)},expression:"dialogData.formData.paperName"}},a._l(a.dialogData.paperList,(function(a){return e("el-option",{key:a.paperId,attrs:{label:a.paperName,value:a.paperName}})})),1)],1)],1)],1),a._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"结束时间",prop:"deadline"}},[e("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:a.dialogData.formData.deadline,callback:function(t){a.$set(a.dialogData.formData,"deadline",t)},expression:"dialogData.formData.deadline"}})],1)],1),a._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"状态"}},[e("el-radio-group",{model:{value:a.dialogData.formData.state,callback:function(t){a.$set(a.dialogData.formData,"state",t)},expression:"dialogData.formData.state"}},[e("el-radio",{attrs:{label:"发布"}},[a._v("发布")]),a._v(" "),e("el-radio",{attrs:{label:"未发布"}},[a._v("未发布")])],1)],1)],1)],1)],1),a._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{nativeOn:{click:function(t){a.dialogData.dialogVisible=!1}}},[a._v("取消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return a.dialogData.handleConfirm(t)}}},[a._v("确定")])],1)],1)},b=[],g=(e("7514"),{filters:{},props:{dialogData:{type:Object,required:!0}},data:function(){return{}},methods:{handleCourseChange:function(a){if(a){var t=this.dialogData.courseList.find((function(t){return t.subjectName===a})).subjectId;this.dialogData.formData.subjectId=t,this.getPaperList(t)}},handlePaperChange:function(a){if(a){var t=this.dialogData.paperList.find((function(t){return t.paperName===a})).paperId;this.dialogData.formData.paperId=t}},getPaperList:function(a){var t=this;Object(p["d"])({subjectId:a}).then((function(a){t.dialogData.paperList=a.data.map((function(a){var t={paperId:a.paperId,paperName:a.paperName};return t}))})).catch((function(){alert("获取paperList失败")}))}}}),D=g,v=(e("f4b0"),e("2877")),x=Object(v["a"])(D,h,b,!1,null,null,null),y=x.exports,j={name:"User",components:{MyTable:f["a"],ExaminationDialog:y},filters:{examinationFilter:function(a,t){var e=t.listQuery,n=Object(o["a"])({},a),i=e.pageNum,l=e.pageSize,r=e.name;return n.tableData=n.tableData.filter((function(a){return!r||a.examinationName.toLowerCase().includes(r.toLowerCase())})),t.total=n.tableData.length,n.tableData=n.tableData.filter((function(a,t){return t<l*i&&t>=l*(i-1)})),n}},data:function(){return{pagination:{listQuery:{pageNum:1,pageSize:10,name:""},total:0},myTableData:{columnList:[{prop:"examName",label:"考试名称"},{prop:"subjectName",label:"所属课程"},{prop:"paperName",label:"试卷"},{prop:"lastTime",label:"考试时间"},{prop:"deadline",label:"结束时间"},{prop:"state",label:"状态"}],tableData:[{examName:"",subjectName:"",paperName:"",lastTime:null,deadline:null,state:null}],menuList:[{icon:"el-icon-edit",word:"编辑",command:this.handleEdit},{icon:"el-icon-delete",word:"删除",command:this.handleDelete},{icon:"el-icon-switch-button",word:"发布/撤销",command:this.handlePublic}],loading:!1,handleSelectionChange:this.handelSelectionChange},examinationDialogData:{dialogVisible:!1,courseList:[],paperList:[],formData:{examName:"",subjectName:"",subjectId:"",paperName:"",paperId:"",lastTime:null,deadline:null,state:null},handleConfirm:this.handleConfirm},multipleSelection:[]}},created:function(){this.getList()},methods:{refresh:function(){this.getList()},getList:function(){var a=this;Object(p["c"])().then((function(t){a.myTableData.loading=!0,a.courseList=t.data,a.myTableData.tableData=[];var e,n=Object(l["a"])(a.courseList);try{for(n.s();!(e=n.n()).done;){var i=e.value;s({SubjectId:i.subjectId}).then((function(t){a.myTableData.loading=!0,a.myTableData.tableData=a.myTableData.tableData.concat(t.data.map((function(a){var t={published:"发布",unpublished:"未发布"};return a.state=t[a.state],a}))),a.pagination.total=a.myTableData.tableData.length,setTimeout((function(){a.myTableData.loading=!1}),500)})).catch((function(){a.myTableData.Loading=!1}))}}catch(o){n.e(o)}finally{n.f()}})).catch((function(){alert("获取课程列表失败")}))},getcourseList:function(){var a=this;Object(p["c"])().then((function(t){a.examinationDialogData.courseList=t.data,console.log("sourse",a.courseList)})).catch((function(){alert("获取courseList失败")}))},handleSizeChange:function(a){this.pagination.listQuery.pageSize=a},handleCurrentChange:function(a){this.pagination.listQuery.pageNum=a},handleEdit:function(a){this.examinationDialogData.formData=a,this.getcourseList(),this.examinationDialogData.dialogVisible=!0},handleCreate:function(){this.handleClean(),this.getcourseList(),this.examinationDialogData.dialogVisible=!0},handleConfirm:function(){var a=this,t={"发布":"published","未发布":"unpublished"};this.examinationDialogData.formData.state=t[this.examinationDialogData.formData.state],c({exam:[this.examinationDialogData.formData]}).then((function(t){a.examinationDialogData.dialogVisible=!1,a.getList()})).catch((function(){alert("修改或添加考试失败")}))},handleClean:function(){this.examinationDialogData.formData={examName:"",subjectName:"",subjectId:"",paperName:"",paperId:"",lastTime:null,deadline:null,state:null}},handleDelete:function(a){var t=this;u({ExamId:a.examId}).then((function(a){t.getList()})).catch((function(){alert("删除考试失败")}))},handelSelectionChange:function(a){this.multipleSelection=a},handleDeletes:function(){var a,t=Object(l["a"])(this.multipleSelection);try{for(t.s();!(a=t.n()).done;){var e=a.value;this.handleDelete(e)}}catch(n){t.e(n)}finally{t.f()}},handlePublic:function(a){"发布"===a.state?m({ExamId:a.examId}).then((function(t){a.state="未发布"})).catch((function(){alert("撤销考试失败")})):d({ExamId:a.examId}).then((function(t){a.state="发布"})).catch((function(){alert("发布考试失败")}))}}},N=j,_=Object(v["a"])(N,n,i,!1,null,null,null);t["default"]=_.exports},f4b0:function(a,t,e){"use strict";var n=e("2992"),i=e.n(n);i.a}}]);