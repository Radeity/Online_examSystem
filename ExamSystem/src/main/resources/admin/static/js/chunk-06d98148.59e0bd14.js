(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06d98148"],{"0fcb":function(e,t,a){},"6c49":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"g",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return u}));var n=a("b775");function i(){return Object(n["a"])({url:"/tea/getsubject",method:"get"})}function r(e){return Object(n["a"])({url:"/tea/getpaper",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/tea/saveorupdatepaper",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/tea/delpaper",method:"DELETE",params:e})}function s(e){return Object(n["a"])({url:"/tea/paperdetailfortea",method:"get",params:e})}function c(e){return Object(n["a"])({url:"/tea/addquetopaper",method:"post",params:e})}function u(e){return Object(n["a"])({url:"/tea/delequefrompaper",method:"delete",params:e})}},"8b95":function(e,t,a){"use strict";var n=a("0fcb"),i=a.n(n);i.a},a9fc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"输入考试名称查询"},model:{value:e.pagination.listQuery.examName,callback:function(t){e.$set(e.pagination.listQuery,"examName",t)},expression:"pagination.listQuery.examName"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"选择课程",clearable:""},on:{change:e.handeleSubjectChange},model:{value:e.pagination.listQuery.subjectName,callback:function(t){e.$set(e.pagination.listQuery,"subjectName",t)},expression:"pagination.listQuery.subjectName"}},e._l(e.courseList,(function(e){return a("el-option",{key:e.subjectId,attrs:{label:e.subjectName,value:e.subjectName}})})),1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"请先选择课程再选授课老师",clearable:""},model:{value:e.pagination.listQuery.teacherName,callback:function(t){e.$set(e.pagination.listQuery,"teacherName",t)},expression:"pagination.listQuery.teacherName"}},e._l(e.teacherList,(function(e){return a("el-option",{key:e.teacherId,attrs:{label:e.teacherName,value:e.teacherName,clearable:"",filterable:""}})})),1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{icon:"el-icon-download",type:"success"},nativeOn:{click:function(t){return e.handleExport(t)}}},[e._v("导出")])],1)],1)],1),e._v(" "),a("my-table",{attrs:{data:e._f("examinationFilter")(e.myTableData,e.pagination)}}),e._v(" "),a("div",[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pagination.total>0,expression:"pagination.total>0"}],attrs:{"current-page":e.pagination.listQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":e.pagination.listQuery.pageSize,total:e.pagination.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("score-dialog",{attrs:{"dialog-data":e.scoreDialogData,pagination:e.dialogPagination,"pie-data":e.pieData}})],1)},i=[],r=(a("7514"),a("6762"),a("2fdb"),a("db72")),o=a("b775");function l(e){return Object(o["a"])({url:"/tea/getallgrade",method:"get",params:e})}function s(e){return Object(o["a"])({url:"/tea/teacherquery",method:"get",params:e})}function c(e){return Object(o["a"])({url:"/tea/excel",method:"get",responseType:"blob",params:e})}var u=a("6c49"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.data.loading,expression:"data.loading"}],attrs:{data:e.data.tableData},on:{"selection-change":e.data.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),e._l(e.data.columnList,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,"show-overflow-tooltip":"",sortable:""}})})),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-info",size:"small"},nativeOn:{click:function(a){return e.data.handleDetail(t.row)}}},[e._v("详情")])]}}])})],2)],1)},p=[],m={props:{data:{type:Object,required:!0}},data:function(){return{}},methods:{handleCommand:function(e){e.command(e.row)}}},h=m,g=(a("8b95"),a("2877")),f=Object(g["a"])(h,d,p,!1,null,null,null),b=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogData.dialogVisible},on:{"update:visible":function(t){return e.$set(e.dialogData,"dialogVisible",t)}}},[a("el-row",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("成绩详情")])]),e._v(" "),a("el-row",{attrs:{gutter:12,type:"flex",align:"middle"}},[a("el-col",{attrs:{span:9}},[a("el-row",[a("div",{staticStyle:{margin:"6px","font-size":"17px"}},[e._v("\n              考试名称："+e._s(e.dialogData.examinationInfo.examName)+"\n            ")])]),e._v(" "),a("el-row",[a("div",{staticStyle:{margin:"6px","font-size":"17px"}},[e._v("\n              授课教师："+e._s(e.dialogData.examinationInfo.teacherName)+"\n            ")])]),e._v(" "),a("el-row",[a("div",{staticStyle:{margin:"6px","font-size":"17px"}},[e._v("\n              考生姓名："+e._s(e.dialogData.examinationInfo.studentName)+"\n            ")])]),e._v(" "),a("el-row",[a("div",{staticStyle:{margin:"6px","font-size":"17px"}},[e._v("\n              学院名称："+e._s(e.dialogData.examinationInfo.department)+"\n            ")])]),e._v(" "),a("el-row",[a("div",{staticStyle:{margin:"6px","font-size":"17px"}},[e._v("\n              班级名称："+e._s(e.dialogData.examinationInfo.adminclass)+"\n            ")])])],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-row",[a("div",{staticStyle:{margin:"4px","font-size":"25px"}},[e._v("成绩")])]),e._v(" "),a("el-row",[a("div",{staticStyle:{margin:"4px","font-size":"25px"}},[e._v(e._s(e.dialogData.examinationInfo.score))])])],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("pie-chart",{attrs:{data:e.pieData}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-card",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.dialogData.questionList,"default-sort":{prop:"id",order:"descending"},"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"题目名称","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.questionName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"类型","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info",effect:"dark",size:"small"}},[e._v(e._s(e._f("typeFilter")(t.row.questionType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"考生答案","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.stuAnswer))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参考答案","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.corAnswer))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"得分","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.answerPoint))])]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pagination.total>0,expression:"pagination.total>0"}],attrs:{"current-page":e.pagination.listQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":e.pagination.listQuery.pageSize,total:e.pagination.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},_=[],y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},N=[],w=a("313e"),x=a.n(w),D=a("ed08"),z={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var e=this;this.$_resizeHandler=Object(D["b"])((function(){e.chart&&e.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("817d");var j={mixins:[z],props:{data:{type:Array,default:function(){return[]}},className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},watch:{data:{handler:function(e,t){this.initChart(e)}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart(e.data)}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(e){this.chart=x.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["Industries","Technology","Forex","Gold","Forecasts"]},series:[{name:"答题统计",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:e,animationEasing:"cubicInOut",animationDuration:2600}]})}}},S=j,$=Object(g["a"])(S,y,N,!1,null,null,null),E=$.exports,L={components:{PieChart:E},filters:{typeFilter:function(e){var t=["单选题","多选题","填空题"];return t[e]}},props:{dialogData:{type:Object,required:!0},pagination:{type:Object,required:!0},pieData:{type:Array,required:!0}},methods:{handleSizeChange:function(e){this.pagination.listQuery.pageSize=e},handleCurrentChange:function(e){this.pagination.listQuery.pageNum=e}}},C=L,O=Object(g["a"])(C,v,_,!1,null,null,null),Q=O.exports,k=a("5c96"),I={name:"User",components:{MyTable:b,ScoreDialog:Q},filters:{examinationFilter:function(e,t){var a=t.listQuery,n=Object(r["a"])({},e),i=a.pageNum,o=a.pageSize,l=a.examName,s=a.subjectName,c=a.teacherName;return n.tableData=n.tableData.filter((function(e){return-1!==e.score&&(!l||e.examName.toLowerCase().includes(l.toLowerCase()))&&(!s||e.subjectName===s)&&(!c||e.teacherName===c)})),t.total=n.tableData.length,n.tableData=n.tableData.filter((function(e,t){return t<o*i&&t>=o*(i-1)})),n}},data:function(){return{pagination:{listQuery:{pageNum:1,pageSize:10,examName:"",subjectName:"",teacherName:""},total:0},dialogPagination:{listQuery:{pageNum:1,pageSize:10,examName:"",subjectName:"",teacherName:""},total:10},myTableData:{columnList:[{prop:"examName",label:"考试名称"},{prop:"subjectName",label:"课程"},{prop:"studentName",label:"姓名"},{prop:"teacherName",label:"授课老师"},{prop:"department",label:"学院"},{prop:"className",label:"班级"},{prop:"score",label:"成绩"},{prop:"submit",label:"提交时间"}],tableData:[{examName:"",subjectName:"",studentName:"",teacherName:"",department:"",className:"",score:null,submit:null}],handleDetail:this.handleDetail,loading:!1,handleSelectionChange:function(){}},scoreDialogData:{dialogVisible:!1,examinationInfo:{examName:"",subjectName:"",studentName:"",className:""},questionList:[{questionName:"",questionType:"",answer:"",corAnswer:"",score:""}]},exportDialog:{dialogVisible:!1,subjectName:"",examName:"",teacherName:""},courseList:[],teacherList:[],pieData:[]}},watch:{scoreDialogData:{handler:function(){console.log("change",this.scoreDialogData.dialogVisible)}}},created:function(){this.getList(),this.getcourseList()},methods:{getList:function(){var e=this,t={pageNum:this.pagination.listQuery.pageNum,pageSize:this.pagination.listQuery.pageSize};l(t).then((function(t){e.myTableData.loading=!0,e.myTableData.tableData=t.data,setTimeout((function(){e.myTableData.loading=!1}),500)})).catch((function(){e.myTableData.Loading=!1}))},handleSizeChange:function(e){this.pagination.listQuery.pageSize=e},handleCurrentChange:function(e){this.pagination.listQuery.pageNum=e},handleClean:function(){this.examinationDialogData.formData={examinationName:"",examinationType:"",course:"",totalScore:null,status:null,startTime:null}},handleDetail:function(e){var t=this;this.scoreDialogData.examinationInfo=e;var a={ExamId:e.examId,StudentId:e.studentId};this.scoreDialogData.dialogVisible=!0,Object(u["e"])(a).then((function(a){t.scoreDialogData.questionList=a.data.answer,t.pieData=[{value:a.data.correct,name:"正确"},{value:a.data.wrong,name:"错误"}],t.scoreDialogData.examinationInfo=e,t.dialogPagination.total=a.data.answer.length})).catch((function(){alert("获取成绩详情失败")}))},getcourseList:function(){var e=this;Object(u["c"])().then((function(t){e.courseList=t.data,console.log("courseList",e.courseList)})).catch((function(){alert("获取courseList失败")}))},handeleSubjectChange:function(e){var t=this;if(e){var a=this.courseList.find((function(t){return t.subjectName===e})).subjectId;console.log("subject",a),s({SubjectId:a}).then((function(e){t.teacherList=e.data.map((function(e){return{teacherId:e.teacherId,teacherName:e.teacherName}}))})).catch((function(){alert("获取teacherList失败")}))}else this.pagination.listQuery.teacherName="",this.teacherList=[]},handleExport:function(){var e=this,t=this.pagination.listQuery;t.subjectName?c(t).then((function(t){e.download(t.data)})).catch((function(){alert("导出失败")})):k["Message"].error("必须选择导出的课程")},download:function(e){if(e){var t=this.pagination.listQuery,a=t.subjectName;t.courseName&&(a=a+"-"+t.courseName),t.teacherName&&(a=a+"-"+t.teacherName),a+=".xlsx";var n=window.URL.createObjectURL(new Blob([e])),i=document.createElement("a");i.style.display="none",i.href=n,i.setAttribute("download",a),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n)}}}},R=I,T=Object(g["a"])(R,n,i,!1,null,null,null);t["default"]=T.exports}}]);